{% extends "base.html" %}

{% block content %}
<main class="page gallery-page">
  <section class="page-hero" data-scroll>
    <p class="eyebrow">Visual Gallery</p>
    <h1>Gallery</h1>
    <p>
      Explore our gallery featuring sacred rituals, cultural events, and cherished moments captured at the temple.
    </p>
  </section>

  <section class="gallery-grid">
    {% for item in gallery %}
    {% set card_title = item.title or item.caption or 'Gallery image' %}
    <figure class="gallery-item" aria-label="{{ card_title }}">
      <button
        type="button"
        class="gallery-fullscreen-trigger"
        data-src="{{ item.src }}"
        data-alt="{{ card_title }}"
        aria-label="Expand {{ card_title }}"
      >
        <div class="gallery-card">
          <div class="gallery-media">
            <img
              src="{{ item.src }}"
              alt="{{ card_title }}"
              decoding="async"
              loading="{{ item.loading if item.loading is defined else ('eager' if loop.first else 'lazy') }}"
              sizes="(max-width: 640px) 90vw, (max-width: 1200px) 45vw, 30vw"
              fetchpriority="{{ item.fetchpriority if item.fetchpriority is defined else ('high' if loop.first else 'auto') }}"
            />
          </div>
        </div>
      </button>
    </figure>
    {% endfor %}
  </section>

  <div
    class="fullscreen-modal"
    id="galleryLightbox"
    role="dialog"
    aria-modal="true"
    aria-label="Expanded gallery image"
    hidden
  >
    <button class="modal-close" aria-label="Close fullscreen view">&times;</button>
    <img src="" alt="" id="lightboxImage" />
  </div>
</main>
{% endblock %}

